{"version":3,"sources":["games/lift/images/spritesheet.gif","games/lift/lift.initial-state.ts","games/lift/lift.action.ts","games/lift/utils/map-step-to-next-step.ts","games/lift/utils/map-step-to-target-keys.ts","games/lift/lift.hook.ts","hooks/use-key-down.ts","games/lift/index.tsx","games/lift/lift.reducer.ts","games/lift/utils/get-next-cycle-from-completed-step.ts","games/lift/lift.view.tsx"],"names":["module","exports","Action","initialState","cycle","step","mapStepToNextStep","DOWN_KEYS","LEFT_KEYS","RIGHT_KEYS","UP_KEYS","useLift","callback","dispatch","targetKeys","useMemo","mapStepToTargetKeys","handleKeyDown","useCallback","e","includes","key","CompleteStep","useEffect","window","addEventListener","removeEventListener","mapStepToBackgroundPosition","x","y","scale","Math","log","mapCycleToScale","scaledPositionX","round","scaledPositionY","scaledSizeHeight","scaledSizeWidth","backgroundImage","spritesheet","backgroundPosition","backgroundSize","height","floor","width","lift","reducer","state","action","title","View","style"],"mappings":"wFAAAA,EAAOC,QAAU,k5D,uCCEjB,ICFKC,EDOUC,EALa,CAC1BC,MAAO,EACPC,KAAM,I,SCJHH,O,gCAAAA,M,KAIUA,QCFA,SAASI,EAAkBD,GACxC,OAAQA,GACN,KAAK,EACH,OAAO,EACT,KAAK,EACH,OAAO,EACT,KAAK,EACH,OAAO,EACT,KAAK,EACH,OAAO,EACT,KAAK,EACH,OAAO,EACT,KAAK,EACH,OAAO,G,gDCbPE,EAAsB,CAAC,IAAK,YAAa,KACzCC,EAAsB,CAAC,IAAK,YAAa,KACzCC,EAAuB,CAAC,IAAK,aAAc,KAC3CC,EAAoB,CAAC,IAAK,UAAW,KC6B5B,SAASC,EAAT,GAIW,ICnCxBC,EDgCAR,EAGuB,EAHvBA,MACAS,EAEuB,EAFvBA,SACAR,EACuB,EADvBA,KAEMS,EAAuBC,mBAC3B,kBDjCW,SAA6BV,GAC1C,OAAQA,GACN,KAAK,EACH,OAAOG,EACT,KAAK,EACL,KAAK,EACH,OAAOE,EACT,KAAK,EACL,KAAK,EACH,OAAOH,EACT,KAAK,EACH,OAAOE,GCsBOO,CAAoBX,KACpC,CAACA,IAGGY,EAAgBC,uBACpB,SAACC,GACKL,EAAWM,SAASD,EAAEE,MACxBR,EAASX,EAAOoB,gBAGpB,CAACT,EAAUC,IAKb,OCpDAF,EDkDWK,EChDXM,qBAAU,WAER,OADAC,OAAOC,iBAAiB,UAAWb,GAC5B,WACLY,OAAOE,oBAAoB,UAAWd,MAEvC,CAACA,ID6CGG,mBAAQ,WAAsB,IAAD,EAnCtC,SAAqCV,GACnC,OAAQA,GACN,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACH,MAAO,EAAE,GAAI,GACf,KAAK,EACH,MAAO,EAAE,IAAK,GAChB,KAAK,EACH,MAAO,EAAE,IAAK,IA0BDsB,CAA4BtB,GADT,mBAC3BuB,EAD2B,KACxBC,EADwB,KAE5BC,EAzCV,SAAyB1B,GACvB,OAAO,EAAI2B,KAAKC,IAAI5B,EAAQ,GAwCJ6B,CAAgB7B,GAChC8B,EAA0BH,KAAKI,MAAMP,EAAIE,GACzCM,EAA0BL,KAAKI,MAAMN,EAAIC,GACzCO,EAA2BN,KAAKI,MA/Cd,GA+C0CL,GAC5DQ,EAA0BP,KAAKI,MA/Cd,IA+CyCL,GAChE,MAAO,CACLS,gBAAgB,QAAD,OAAUC,IAAV,MACfC,mBAAmB,GAAD,OAAKP,EAAL,cAA0BE,EAA1B,MAClBM,eAAe,GAAD,OAAKJ,EAAL,cAA0BD,EAA1B,MACdM,OAAQZ,KAAKa,MAAM,GAAKd,GACxBe,MAAOd,KAAKa,MAAM,GAAKd,MAExB,CAAC1B,EAAOC,IE9Db,IAAMyC,EAA4B,CAChC3C,eACA4C,QCJa,SAAiBC,EAAcC,GAC5C,OAAQA,GACN,KAAK/C,EAAOoB,aACV,MAAO,CACLlB,OCNNA,EDM2C4C,EAAM5C,MCLjDC,EDKwD2C,EAAM3C,KCHjD,IAATA,EACKD,EAAQ,EAEVA,GDCDC,KAAMC,EAAkB0C,EAAM3C,OCRvB,IACbD,EACAC,GFMA6C,MAAO,OACPC,KGLa,YAGiC,IAF9CtC,EAE6C,EAF7CA,SAE6C,IAD7CmC,MAEMI,EAAuBzC,EAAQ,CAAEP,MADM,EADpCA,MAEqCS,WAAUR,KADX,EAD7BA,OAIhB,OAAO,yBAAK+C,MAAOA,MHENN","file":"static/js/3.ffab14dd.chunk.js","sourcesContent":["module.exports = \"data:image/gif;base64,R0lGODlhkQAxAPcAAAAAAAAAMwAAZgAAmQAAzAAA/wArAAArMwArZgArmQArzAAr/wBVAABVMwBVZgBVmQBVzABV/wCAAACAMwCAZgCAmQCAzACA/wCqAACqMwCqZgCqmQCqzACq/wDVAADVMwDVZgDVmQDVzADV/wD/AAD/MwD/ZgD/mQD/zAD//zMAADMAMzMAZjMAmTMAzDMA/zMrADMrMzMrZjMrmTMrzDMr/zNVADNVMzNVZjNVmTNVzDNV/zOAADOAMzOAZjOAmTOAzDOA/zOqADOqMzOqZjOqmTOqzDOq/zPVADPVMzPVZjPVmTPVzDPV/zP/ADP/MzP/ZjP/mTP/zDP//2YAAGYAM2YAZmYAmWYAzGYA/2YrAGYrM2YrZmYrmWYrzGYr/2ZVAGZVM2ZVZmZVmWZVzGZV/2aAAGaAM2aAZmaAmWaAzGaA/2aqAGaqM2aqZmaqmWaqzGaq/2bVAGbVM2bVZmbVmWbVzGbV/2b/AGb/M2b/Zmb/mWb/zGb//5kAAJkAM5kAZpkAmZkAzJkA/5krAJkrM5krZpkrmZkrzJkr/5lVAJlVM5lVZplVmZlVzJlV/5mAAJmAM5mAZpmAmZmAzJmA/5mqAJmqM5mqZpmqmZmqzJmq/5nVAJnVM5nVZpnVmZnVzJnV/5n/AJn/M5n/Zpn/mZn/zJn//8wAAMwAM8wAZswAmcwAzMwA/8wrAMwrM8wrZswrmcwrzMwr/8xVAMxVM8xVZsxVmcxVzMxV/8yAAMyAM8yAZsyAmcyAzMyA/8yqAMyqM8yqZsyqmcyqzMyq/8zVAMzVM8zVZszVmczVzMzV/8z/AMz/M8z/Zsz/mcz/zMz///8AAP8AM/8AZv8Amf8AzP8A//8rAP8rM/8rZv8rmf8rzP8r//9VAP9VM/9VZv9Vmf9VzP9V//+AAP+AM/+AZv+Amf+AzP+A//+qAP+qM/+qZv+qmf+qzP+q///VAP/VM//VZv/Vmf/VzP/V////AP//M///Zv//mf//zP///wAAAAAAAAAAAAAAACH5BAEAAPwALAAAAACRADEAAAj/AAHsE0hwoMGCCA8qTMhwocOGEB9KjEhxosWKAvdp3Mixo8ePIEOKHEmypMmTKEFmTDkQgMuVLA3GfOky5kaYKGniTLmzZE2OP23yxBlU6MmiLYX2FLlUJs+nKmdC/diU6dSoRklWdZo15NatWE1+ZQkW6MiyHdFqHHtVq8+uXt/CpSo359G6Yu+6tZt3r96+Z+fS9Sv4Jl7AhOPyPRwWceDEkK1GnltWLVnGkxsPXozZbNvHijl3NlzYI9vSnkOLzmyZ9F/TUle7lq2VaGujSJGiBmpbqU2duH/TDD5zuG/iux0nl5z1durjv7s6nx0dOeqXaYNOFwwTO++q27lW/8/uvaX38GuRA19rHLb1wjrj/0Qv/ab89ZvJ6v5svibB4eWNp19GwP0X4HNPFXTdfOw1tFxcCp7XIHN8EQgdhTJZKKBeGiKo2l8r0UdhiNQ9SGJ6Hn5IWHexgcZiiaM19iKKmWlGVHId0qjjbjemptaP7qWIYVQ7FcmfZuJlqJyKSTZZX5BCNpefYUBOtlSVG8KI5JRaYjmklk6W1pSIO0ZJG5hhpolmjZWBxuVlX5qp5pNMnllmi1DSddqWee355p1moReiduYRWWNwYFVG6IFU1ldgf0YCit2gJ8Lp5KT2kfgofq6FR+B97XVKFYCQSnnnpqGCGiqNgpbaoG6VfnWnKqB+9aSqhPhxyqp6ucGalmnt6dpWkcGueiCjPWZ5mK29xvpak8cSaimth35I5rPXOubptGvW+eV0t9mqbGTZutktd3/GuCW43FIb57fjvlsun3PCNWa89DrX2r3tmisnvQ8GLDCPFxWMkcEIH6xwwgwrHBAAOw==\"","import State from './lift.state';\n\nconst initialState: State = {\n  cycle: 0,\n  step: 0,\n};\n\nexport default initialState;\n","enum Action {\n  CompleteStep,\n}\n\nexport default Action;\n","import Step from '../types/step';\n\nexport default function mapStepToNextStep(step: Step): Step {\n  switch (step) {\n    case 0:\n      return 1;\n    case 1:\n      return 2;\n    case 2:\n      return 3;\n    case 3:\n      return 4;\n    case 4:\n      return 5;\n    case 5:\n      return 0;\n  }\n}\n","import Step from '../types/step';\n\nconst DOWN_KEYS: string[] = ['2', 'ArrowDown', 's'];\nconst LEFT_KEYS: string[] = ['4', 'ArrowLeft', 'a'];\nconst RIGHT_KEYS: string[] = ['6', 'ArrowRight', 'd'];\nconst UP_KEYS: string[] = ['8', 'ArrowUp', 'w'];\n\nexport default function mapStepToTargetKeys(step: Step): string[] {\n  switch (step) {\n    case 0:\n      return LEFT_KEYS;\n    case 1:\n    case 4:\n      return UP_KEYS;\n    case 2:\n    case 5:\n      return DOWN_KEYS;\n    case 3:\n      return RIGHT_KEYS;\n  }\n}\n","import { CSSProperties, Dispatch, useCallback, useMemo } from 'react';\nimport useKeyDown from '../../hooks/use-key-down';\nimport spritesheet from './images/spritesheet.gif';\nimport Action from './lift.action';\nimport Step from './types/step';\nimport mapStepToTargetKeys from './utils/map-step-to-target-keys';\n\ninterface Props {\n  cycle: number;\n  dispatch: Dispatch<Action>;\n  step: Step;\n}\n\nconst SPRITE_SHEET_HEIGHT = 49;\nconst SPRITE_SHEET_WIDTH = 145;\n\nfunction mapCycleToScale(cycle: number): number {\n  return 1 + Math.log(cycle + 1);\n}\n\nfunction mapStepToBackgroundPosition(step: Step): number[] {\n  switch (step) {\n    case 0:\n    case 1:\n    case 3:\n    case 4:\n      return [-1, -1];\n    case 2:\n      return [-49, -1];\n    case 5:\n      return [-97, -1];\n  }\n}\n\nexport default function useLift({\n  cycle,\n  dispatch,\n  step,\n}: Props): CSSProperties {\n  const targetKeys: string[] = useMemo(\n    (): string[] => mapStepToTargetKeys(step),\n    [step],\n  );\n\n  const handleKeyDown = useCallback(\n    (e: KeyboardEvent): void => {\n      if (targetKeys.includes(e.key)) {\n        dispatch(Action.CompleteStep);\n      }\n    },\n    [dispatch, targetKeys],\n  );\n\n  useKeyDown(handleKeyDown);\n\n  return useMemo((): CSSProperties => {\n    const [x, y] = mapStepToBackgroundPosition(step);\n    const scale: number = mapCycleToScale(cycle);\n    const scaledPositionX: number = Math.round(x * scale);\n    const scaledPositionY: number = Math.round(y * scale);\n    const scaledSizeHeight: number = Math.round(SPRITE_SHEET_HEIGHT * scale);\n    const scaledSizeWidth: number = Math.round(SPRITE_SHEET_WIDTH * scale);\n    return {\n      backgroundImage: `url(\"${spritesheet}\")`,\n      backgroundPosition: `${scaledPositionX}px ${scaledPositionY}px`,\n      backgroundSize: `${scaledSizeWidth}px ${scaledSizeHeight}px`,\n      height: Math.floor(47 * scale),\n      width: Math.floor(47 * scale),\n    };\n  }, [cycle, step]);\n}\n","import { useEffect } from 'react';\n\nexport default function useKeyDown(\n  callback: (event: KeyboardEvent) => void,\n): void {\n  useEffect((): (() => void) => {\n    window.addEventListener('keydown', callback);\n    return (): void => {\n      window.removeEventListener('keydown', callback);\n    };\n  }, [callback]);\n}\n","import Game from '../../types/game';\nimport Action from './lift.action';\nimport initialState from './lift.initial-state';\nimport reducer from './lift.reducer';\nimport State from './lift.state';\nimport View from './lift.view';\n\nconst lift: Game<State, Action> = {\n  initialState,\n  reducer,\n  title: 'Lift',\n  View,\n};\n\nexport default lift;\n","import Action from './lift.action';\nimport State from './lift.state';\nimport getNextCycleFromCompletedStep from './utils/get-next-cycle-from-completed-step';\nimport mapStepToNextStep from './utils/map-step-to-next-step';\n\nexport default function reducer(state: State, action: Action): State {\n  switch (action) {\n    case Action.CompleteStep:\n      return {\n        cycle: getNextCycleFromCompletedStep(state.cycle, state.step),\n        step: mapStepToNextStep(state.step),\n      };\n  }\n}\n","import Step from '../types/step';\n\nexport default function getNextCycleFromCompletedStep(\n  cycle: number,\n  step: Step,\n): number {\n  if (step === 5) {\n    return cycle + 1;\n  }\n  return cycle;\n}\n","import React, { CSSProperties, ReactElement } from 'react';\nimport GameViewProps from '../../types/game-view-props';\nimport Action from './lift.action';\nimport useLift from './lift.hook';\nimport State from './lift.state';\n\nexport default function Lift({\n  dispatch,\n  state: { cycle, step },\n}: GameViewProps<State, Action>): ReactElement {\n  const style: CSSProperties = useLift({ cycle, dispatch, step });\n\n  return <div style={style} />;\n}\n"],"sourceRoot":""}